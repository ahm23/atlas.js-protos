syntax = "proto3";

package nebulix.storage.v1;

import "amino/amino.proto";
import "cosmos/base/query/v1beta1/pagination.proto";
import "gogoproto/gogo.proto";
import "google/api/annotations.proto";
import "nebulix/storage/v1/file.proto";
import "nebulix/storage/v1/params.proto";
import "nebulix/storage/v1/provider.proto";
import "nebulix/storage/v1/subscription.proto";

option go_package = "nebulix/x/storage/types";

// Query defines the gRPC querier service.
service Query {
  // Parameters queries the parameters of the module.
  rpc Params(QueryParamsRequest) returns (QueryParamsResponse) {
    option (google.api.http).get = "/nebulix/storage/v1/params";
  }

  // GetSubscriptionInfo Queries a list of GetSubscriptionInfo items.
  rpc GetSubscriptionInfo(QueryGetSubscriptionInfoRequest) returns (QueryGetSubscriptionInfoResponse) {
    option (google.api.http).get = "/nebulix/storage/v1/get_subscription_info/{subscriber_address}/{subscription_id}";
  }

  // Provider Queries a list of Provider items.
  rpc Provider(QueryProviderRequest) returns (QueryProviderResponse) {
    option (google.api.http).get = "/nebulix/storage/v1/provider/{address}";
  }

  // Providers Queries a list of Providers items.
  rpc Providers(QueryProvidersRequest) returns (QueryProvidersResponse) {
    option (google.api.http).get = "/nebulix/storage/v1/providers";
  }

  // File Queries a list of File items.
  rpc File(QueryFileRequest) returns (QueryFileResponse) {
    option (google.api.http).get = "/nebulix/storage/v1/file/{fid}";
  }

  // Files Queries a list of Files items.
  rpc Files(QueryFilesRequest) returns (QueryFilesResponse) {
    option (google.api.http).get = "/nebulix/storage/v1/files";
  }
}

// QueryParamsRequest is request type for the Query/Params RPC method.
message QueryParamsRequest {}

// QueryParamsResponse is response type for the Query/Params RPC method.
message QueryParamsResponse {
  // params holds all the parameters of this module.
  Params params = 1 [
    (gogoproto.nullable) = false,
    (amino.dont_omitempty) = true
  ];
}

// QueryGetSubscriptionInfoRequest defines the QueryGetSubscriptionInfoRequest message.
message QueryGetSubscriptionInfoRequest {
  string subscriber_address = 1;
  string subscription_id = 2;
}

// QueryGetSubscriptionInfoResponse defines the QueryGetSubscriptionInfoResponse message.
message QueryGetSubscriptionInfoResponse {
  StorageSubscription subscription = 1;
}

// QueryProviderRequest defines the QueryProviderRequest message.
message QueryProviderRequest {
  string address = 1;
}

// QueryProviderResponse defines the QueryProviderResponse message.
message QueryProviderResponse {
  Provider provider = 1;
}

// QueryProvidersRequest defines the QueryProvidersRequest message.
message QueryProvidersRequest {}

// QueryProvidersResponse defines the QueryProvidersResponse message.
message QueryProvidersResponse {
  repeated Provider providers = 1;
}

// QueryFileRequest defines the QueryFileRequest message.
message QueryFileRequest {
  string fid = 1;
}

// QueryFileResponse defines the QueryFileResponse message.
message QueryFileResponse {
  File file = 1;
}

// QueryFilesRequest defines the QueryFilesRequest message.
message QueryFilesRequest {
  cosmos.base.query.v1beta1.PageRequest pagination = 1;
}

// QueryFilesResponse defines the QueryFilesResponse message.
message QueryFilesResponse {
  repeated File files = 1;
  cosmos.base.query.v1beta1.PageResponse pagination = 2;
}
